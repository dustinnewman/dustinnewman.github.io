<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Dustin Newman's blog"><link rel="shortcut icon" type=image/x-icon href=https://dustinnewman.net/favicon.ico><link rel=stylesheet href=https://dustinnewman.net/css/normalize.css><link rel=stylesheet href=https://dustinnewman.net/css/magick.css><script defer language=javascript type=text/javascript src=https://dustinnewman.net/js/codelines.js></script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js></script><script>MathJax={tex:{displayMath:[["$$","$$"]],inlineMath:[["$","$"]]}}</script><title>Cascading Style S-Expressions</title></head><body><main><header><h1><a href=https://dustinnewman.net/>Dustin Newman</a></h1><nav><ul><li><a href=/ title=Posts>Posts</a></li><li><a href=/about/ title=About>About</a></li></ul></nav></header><article><h1>Cascading Style S-Expressions</h1><p><em>April 3, 2022</em></p><p>Since I first learned it, Lisp has fascinated me. Not enough to seriously use it beyond projects for college, mind you, but enough where - years later - I’m working on something completely random and the thought crosses my mind “It would be fun to implement this in Lisp,” especially using + as a function, same as any other, in full prefix notation, something even the noble and esteemed Haskell couldn’t seem to commit to. Beyond the simple grammar and elegance, there is something about Lisp which feels fundamental to computation itself, likely the similarity to lambda calculus, which actually <em>is</em> fundamental to computation itself. Sadly, Lisp is rarely used much of anywhere nowadays except as a novelty or pet project. This is strange, considering that Brendan Eich was inspired by Scheme while designing JavaScript. You would think there would be a more direct influence.</p><p>Fortunately for us, it doesn’t have to be that way. I have long thought of writing CSS is a Lisp-style syntax. I’m not sure why exactly. Something about it just <em>feels</em> right. Simple. For maximum confusion, I have decided to name this <strong>Cascading Style S-Expressions</strong>: CSS for short.</p><p>Now, I’m not gonna claim that we can bring Lisp to the web. Lisp’s acolytes are a devout and proud people, who would scoff at the claim that CSS properties and markup even come close to represent the power and beauty of Lisp. And this is correct on some level. CSS is a language for configuration, not computation. There are no functions, no inputs or outputs, no arithmetic, none of that. Just a bunch of key-value pairs.</p><p>That said, I’m gonna do it anyways because, like I said, it’s fun. There are some parts of Lisp which fit nicely with CSS. The nesting of S-expressions is a cleaner way to combine selectors; the extremely simple syntax (the only special characters are parentheses) eschews semicolons, colons, and braces; and honestly something about CSS has just always felt Lisp-y to me. But mostly this is just for fun and an itch being scratched. The quintessential example, what every CSS tutorial starts with, is setting the background-color of the body element.</p><pre><code>(body color red)
</code></pre><p>Here the first atom is the selector: the <code>body</code> element. The next two atoms are actually a pair: the property (color) and its value (red). Together these make up a CSS rule which is just setting one property to some value. This is equivalent to the CSS configuration:</p><pre><code>body {
    color: red;
}
</code></pre><p>Can you feel the aesthetic purity already? I sure can. Multiple rules can be chained together by just repeating these pairs.</p><pre><code>(body color red font-size 14px)
</code></pre><p>I’m gonna assume you already know what this would be equivalent too, so I’m not gonna write it out anymore. The real star of the show though, is nested selectors. Compared to CSS where you have no way to nest without writing an entirely new rule set, CSS (Lisp-style) allows you to specify rules for the current selector, and then nest any children in that same rule set. For example, a common use case when styling a navigation bar that uses an unordered list behind the scenes is to get rid of the styling for both the list and the links within the nav bar. In regular CSS, this is two separate rule sets (one for <code>ul</code> and one for <code>ul li a</code>), but in our CSS, it’s just one straight line.</p><pre><code>(ul list-style none (li (a text-decoration none)))
</code></pre><p>Allowing the children to be specified as sub-S-expressions is immensely satisfying to me, as I find it better clarifies the relationship between the selectors. Of course, we can also have CSS properties that are more than one word, or contain spaces, the most common being the margin shorthand taking up to four parameters of the border shorthand taking three. For this, I overload the parentheses to create lists. In proper Lisp notation, these would start with a single quote.</p><pre><code>(body margin (0px 8px 0px 8px) border (1px solid black))
</code></pre><p>This is actually not ambiguous to the parser because all rules come in pairs of two: property and value. The nested S-expressions will then be those that don’t follow a property. And what about if you have two S-expressions right next to each other? How do we tell them apart from a rule? Simple: properties cannot contain spaces and thus cannot be listed in parentheses. Therefore, in this case we would have two S-expressions and not a rule.</p><p>If you would like to try this out for yourself, the code is <a href=https://github.com/dustinnewman/cascading-style-s-expressions>open-source</a> but who wants to go through all the work of pulling and compiling my parser? For that reason, there is also an <a href=https://dustinnewman.net/cascading-style-s-expressions/>online demo</a> I put together with my first time using WASM. The page is pre-populated with the stylings of that page and you can dynamically edit the CSS to see your Lisp applied. I might end up using this on my own site, the very one you’re reading right now, but time will tell if I have the patience to integrate all of this into Hugo or not.</p></article></main><footer></footer></body></html>